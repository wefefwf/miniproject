<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/main_layout}">
<head>
    <meta charset="UTF-8">
    <style>
        .admin-form-container { max-width: 650px; margin: 50px auto; padding: 40px; background: #ffffff; border-radius: 25px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); }
        .form-header { text-align: center; margin-bottom: 35px; }
        .form-header h2 { font-size: 26px; color: #2E7D32; font-weight: 800; }
        
        .input-group { margin-bottom: 25px; }
        .input-group label { display: block; font-weight: 700; color: #444; margin-bottom: 10px; }
        .form-input { width: 100%; padding: 14px 18px; border: 2px solid #eee; border-radius: 12px; font-size: 15px; transition: 0.3s; box-sizing: border-box; }
        .form-input:focus { border-color: #4CAF50; outline: none; background-color: #f9fff9; }
        
        /* ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ìŠ¤íƒ€ì¼ */
        .preview-box { margin: 10px 0; padding: 15px; background: #f8f9fa; border-radius: 12px; border: 1px solid #eee; }
        .preview-box img { width: 120px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }

        .btn-group { display: flex; gap: 15px; margin-top: 40px; }
        .btn-save { flex: 2; background: #4CAF50; color: white; border: none; padding: 16px; border-radius: 12px; font-weight: 700; font-size: 1.1rem; cursor: pointer; transition: 0.3s; }
        .btn-save:hover { background: #2E7D32; transform: translateY(-2px); }
        .btn-cancel { flex: 1; background: #f5f5f5; color: #666; text-align: center; text-decoration: none; padding: 16px; border-radius: 12px; font-weight: 600; line-height: 1.3; }
        
        input[type="file"]::file-selector-button { background: #e8f5e9; color: #2E7D32; border: none; padding: 10px 18px; border-radius: 8px; cursor: pointer; margin-right: 15px; font-weight: 600; }
    </style>
</head>
<body>
    <div layout:fragment="content">
        <div class="admin-form-container">
            <div class="form-header">
                <h2>ğŸŒ¿ ìƒí’ˆ ì •ë³´ ìˆ˜ì •</h2>
            </div>

            <form th:action="@{/productUpdate}" method="post" enctype="multipart/form-data">
                
                <input type="hidden" name="product_id" th:value="${product.product_id}">
                <input type="hidden" name="image_url" th:value="${product.image_url}">

                <div class="input-group">
                    <label>ì¹´í…Œê³ ë¦¬ ì„ íƒ</label>
                    <select name="category_id" class="form-input">
                        <option th:each="c : ${cList}" 
                                th:value="${c.category_id}" 
                                th:text="${c.category_name}"
                                th:selected="${c.category_id == product.category_id}"></option>
                    </select>
                </div>

                <div class="input-group">
                    <label>ìƒí’ˆëª…</label>
                    <input type="text" name="product_name" class="form-input" th:value="${product.product_name}">
                </div>

                <div class="input-group">
                    <label>íŒë§¤ ê°€ê²©</label>
                    <input type="number" name="price" class="form-input" th:value="${product.price}">
                </div>

                <div class="input-group">
                    <label>ìƒí’ˆ ì´ë¯¸ì§€</label>
                    <div class="preview-box">
                        <p style="font-size: 13px; color: #888; margin-bottom: 8px;">í˜„ì¬ ë“±ë¡ëœ ì´ë¯¸ì§€</p>
                        <img th:src="${product.image_url}">
                    </div>
                    <input type="file" name="file" class="form-input" accept="image/*">
                    <p style="font-size: 12px; color: #999; margin-top: 8px;">* ì´ë¯¸ì§€ë¥¼ ë°”ê¿€ ê²½ìš°ì—ë§Œ ìƒˆ íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”.</p>
                </div>

                <div class="input-group">
                    <label>ìƒí’ˆ ìƒì„¸ ì„¤ëª…</label>
                    <textarea name="description" class="form-input" rows="6" th:text="${product.description}"></textarea>
                </div>

                <div class="btn-group">
                    <button type="submit" class="btn-save">ìˆ˜ì • ì™„ë£Œí•˜ê¸°</button>
                    <a th:href="@{/productDetail(product_id=${product.product_id})}" class="btn-cancel">ì·¨ì†Œ</a>
                </div>
            </form>
        </div>
    </div>
</body>
</html>